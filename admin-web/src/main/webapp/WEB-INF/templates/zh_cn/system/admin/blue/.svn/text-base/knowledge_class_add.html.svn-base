<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head></head>
#macro ( genericTree $somelist )
#foreach ( $some in $somelist )
<option value="$!some.id">#if($!some.level>0)
#foreach($count in [0..$!some.level])&nbsp;&nbsp;#end #end $!some.className</option>
#genericTree($some.childs)
#end
#end
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title></title>
<link href="$!webPath/resources/style/system/manage/$!{config.websiteCss}/template.css"  rel="stylesheet" type="text/css"/>
<link  href="$!webPath/resources/style/common/css/jquery-ui-1.8.22.custom.css" type="text/css" rel="stylesheet" />
<link href="$!webPath/resources/style/common/css/overlay.css" type="text/css" rel="stylesheet" />
<link rel="stylesheet" href="$!webPath/resources/editor/themes/default/default.css" />
<script src="$!webPath/resources/js/jquery-1.6.2.js"></script>
<script src="$!webPath/resources/js/jquery.validate.min.js"></script>
<script src="$!webPath/resources/js/jquery.shop.common.js"></script>
<script src="$!webPath/resources/js/jquery.poshytip.min.js"></script>
<script src="$!webPath/resources/js/jquery-ui-1.8.21.js"></script>
<script src="$!webPath/resources/js/ajaxfileupload.js"></script>
<script src="$!webPath/resources/js/jquery.imgareaselect.js"></script>
<script src="$!webPath/resources/js/jquery.zh.cn.js" charset="utf-8"></script>
<script src="$!webPath/resources/js/jquery.shop.base.js"></script>
<script charset="utf-8" src="$!webPath/resources/editor/kindeditor.js"></script>
<script charset="utf-8" src="$!webPath/resources/editor/lang/zh_CN.js"></script>
<script>
jQuery(document).ready(function() {
    jQuery("#logoShow").mouseover(function() {
        jQuery("#logoImg").css('display', 'block');
    }).mouseout(function() {
        jQuery("#logoImg").css('display', 'none');
    });
	
    jQuery("#theForm").validate({
        rules: {
        	name: {
                required: true
            }
        },
        messages: {
        	name: {
                required: "分类名称不能为空"
            }
        }
    });
    //改变系统提示的样式
    jQuery("span .w").mousemove(function() {
        var id = jQuery(this.parentNode).attr("id");
        if (id = "nothis") {
            jQuery(this.parentNode).attr("id", "this")
        }
    }).mouseout(function() {
        var id = jQuery(this.parentNode).attr("id");
        if (id = "this") {
            jQuery(this.parentNode).attr("id", "nothis")
        }
    });
    var options = {
            cssPath : '$!webPath/resources/editor/themes/default/default.css',
            filterMode : true,
    		uploadJson:'$!webPath/upload.htm',
    		width : '900px',
    		height:'400px',
    		resizeType: 1,
    		syncType:"form",
    		afterCreate : function() {
    							var self = this;
    							self.sync();
    						},
    		afterChange : function() {
    							var self = this;
    							self.sync();
    						},
    		afterBlur : function() {
    							var self = this;
    							self.sync();
    						},
    		items:['source', '|', 'fullscreen', 'undo', 'redo', 'print', 'cut', 'copy', 'paste',
    			'plainpaste', 'wordpaste', '|', 'justifyleft', 'justifycenter', 'justifyright',
    			'justifyfull', 'insertorderedlist', 'insertunorderedlist', 'indent', 'outdent', 'subscript',
    			'superscript', '|', 'selectall', 'clearhtml','quickformat','|',
    			'formatblock', 'fontname', 'fontsize', '|', 'forecolor', 'hilitecolor', 'bold',
    			'italic', 'underline', 'strikethrough', 'lineheight', 'removeformat', '|', 'image', 'multiimage', 'table', 'hr', 'emoticons', 'link', 'unlink', '|', 'about']
    };

    editor = KindEditor.create('#article', options);
});

function saveForm() {
  var r = jQuery("#theForm").valid();
	if(jQuery("#article").val()==""){
		jQuery("#show").show();
	}else{
		  
    	jQuery("#theForm").submit();
	}
}



/*Ajax分页*/
function ajaxPage(url,currentPage,obj){
	var gc_id=jQuery("#gc_id").val();
	var goods_name=jQuery("#goods_name").val();
     jQuery.post("$!webPath/admin/information_goods.htm",{"currentPage":currentPage,"gc_id":gc_id,
		"goods_name":goods_name},function(text){
       jQuery("#info_goods").empty();
        jQuery("#info_goods").append(text);
     },"text");
}
function show_goods(){
	jQuery("#info_goods").show();
    jQuery("#info_goods_imgs").hide();
}
function editor_add(obj, id) {
    var html = "<a href='$!webPath/goods_" + id + ".htm' target='_blank'><img src='" + obj + "' width='200' heigh='200'/></a>";
    editor.insertHtml(html);
}
</script>
<body>
<form action="$!webPath/admin/knowledge_class_save.htm" method="post" name="theForm" id="theForm">
  <input name="id" type="hidden" id="id" value="$!obj.id" />
  <div class="cont">
    <h1 class="seth">知识库分类</h1>
    <div class="nav_list">
      <ul>
        <li> <a href="$!webPath/admin/knowledge_class.htm"><b>知识库分类列表</b></a></li>
        #if(!$!edit)
        <li><a href="$!webPath/admin/knowledge_class_add.htm" class="this" ><b>新增</b></a></li>
        #else
        <li><a href="javascript:void(0);" class="this"><b>编辑</b></a></li>
        #end
      </ul>
    </div>
    <div class="edit">
      <div class="editul setcont" >
        <ul class="set1">
          <li class="setcont_bg"><strong class="sred">*</strong>分类名称</li>
          <li><span class="webname">
            <input name="name" type="text" id="name" value="$!obj.name" />
            </span></li>
        </ul>
      </div>
    </div>
    <div class="submit"> <span class="pad120">
      <input name="" type="button" value="保存" style="cursor:pointer;" onclick="saveForm();"/>
      </span> </div>
  </div>
</form>
</body>
</html>
